angular.module("SDLMSys",["ui.bootstrap","ui.router","ngCookies","ngStorage","ngRoute","ngFileUpload","angularUtils.directives.dirPagination","ncy-angular-breadcrumb"]);
"use strict";angular.module("SDLMSys").config(["$stateProvider","$urlRouterProvider",function(e,t){t.otherwise("/login"),e.state("base",{"abstract":!0,url:"",views:{"sidebar@":{},"content@":{templateUrl:"templates/base.html"},"headerbar@":{}}}).state("index",{url:"/",parent:"base",views:{"content@":{controller:"AuthCtrl",templateUrl:"templates/login/login.html"}}}).state("login",{url:"/login",parent:"base",views:{"content@":{controller:"AuthCtrl",templateUrl:"templates/login/login.html"}}}).state("logout",{url:"/logout",parent:"base",views:{"content@":{controller:"AuthCtrl",templateUrl:"templates/login/logout.html"}}}).state("register",{url:"/register",parent:"base",views:{"content@":{controller:"AuthCtrl",templateUrl:"templates/register/registeruser.html"}}}).state("registerfailed",{url:"/registerfailed",parent:"base",views:{"content@":{templateUrl:"templates/register/registerfailed.html"}}}).state("registersuccessful",{url:"/registersuccessful",parent:"base",views:{"content@":{templateUrl:"templates/register/registersuccessful.html"}}}).state("controlpanel",{url:"/controlpanel",parent:"base",views:{"sidebar@":{templateUrl:"/templates/partials/sidebar.html"},"content@":{templateUrl:"/templates/overall/controlpanel.html"},"headerbar@":{templateUrl:"/templates/partials/headerbar.html"}},ncyBreadcrumb:{label:"Home page"}}).state("searchdocument",{url:"/searchdocument",parent:"controlpanel",views:{"content@":{templateUrl:"templates/search/searchdocument.html"}},ncyBreadcrumb:{label:"Search Documents"}}).state("suggestdocument",{url:"/suggestdocument",parent:"controlpanel",views:{"content@":{templateUrl:"templates/suggest/suggestdocument.html"}},ncyBreadcrumb:{label:"Suggest Documents"}}).state("downloaddocument",{url:"/downloaddocument",parent:"controlpanel",views:{"content@":{templateUrl:"templates/download/downloaddocument.html"}},ncyBreadcrumb:{label:"Download Documents"}}).state("readingdocumentlist",{url:"/readingdocumentlist",parent:"controlpanel",views:{"content@":{templateUrl:"templates/list/readingdocumentlist.html"}},ncyBreadcrumb:{label:"Reading Documents"}}).state("likeddocumentlist",{url:"/likeddocumentlist",parent:"controlpanel",views:{"content@":{templateUrl:"templates/list/likeddocumentlist.html"}},ncyBreadcrumb:{label:"Liked Documents"}}).state("shareddocumentlist",{url:"/shareddocumentlist",parent:"controlpanel",views:{"content@":{templateUrl:"templates/list/shareddocumentlist.html"}},ncyBreadcrumb:{label:"Shared Documents"}}).state("uploaddocument",{url:"/uploaddocument",parent:"controlpanel",views:{"content@":{templateUrl:"templates/upload/uploaddocument.html"}},ncyBreadcrumb:{label:"Upload Document"}}).state("uploaddocumentlist",{url:"/uploaddocumentlist",parent:"controlpanel",views:{"content@":{templateUrl:"templates/list/uploadeddocumentlist.html"}},ncyBreadcrumb:{label:"Uploaded Documents"}}).state("userinteractionlist",{url:"/userinteractionlist",parent:"controlpanel",views:{"content@":{templateUrl:"templates/list/userinteractionlist.html"}},ncyBreadcrumb:{label:"User Interaction"}})}]);
function AlertsCtrl(s){s.alerts=[{type:"success",msg:"It is a successful process"},{type:"danger",msg:"There is a problem occured, please ask your administration to diagnostic and to fix it."}],s.addAlert=function(){s.alerts.push({msg:"Oh la la, There is a new thing pop up!"})},s.closeAlert=function(e){s.alerts.splice(e,1)}}angular.module("SDLMSys").controller("AlertsCtrl",["$scope",AlertsCtrl]);
" use strict";function AuthCtrl(o,t,e,n,a){console.log("Constructing AuthCtrl..."),t.login=function(){var e=new Date;if(t.password){var i=CryptoJS.SHA1(t.password).toString(),r={email:t.email,password:i};console.log("Login called"),a.login(r,function(o){o.type===!1?(n.wrongCount?(n.wrongCount=n.wrongCount+1,console.log("number of Count : "+n.wrongCount)):n.wrongCount=1,alert(o.data)):(n.wrongCount=0,console.log(o.data),n.myDetail=o.data,n.token=o.data.token,n.expiretime=e.now+864e5,window.location="#/controlpanel")},function(){o.error="Failed to Login!"})}else alert("Password must not be empty! Please provide us your identified password!")},t.register=function(){if(t.password)if(t.retypepwd==t.password){var e=new Date,i=CryptoJS.SHA1(t.password).toString(),r={username:t.username,email:t.email,password:i};console.log("Register called"),a.save(r,function(o){o.type===!1?alert(o.data):(console.log(o.data),n.myDetail=o.data.data,n.token=o.data.token,n.expiretime=e.now+864e5,window.location="#/registersuccessful")},function(){o.error="Failed to Register",window.location="#/registerfailed"})}else alert("Your password and its retype confirmation are not identical. Please retype them!");else alert("The password and the retyped one must not be empty for verification purpose! Please input them!")},t.me=function(){console.log("Me called"),a.me(function(o){t.myDetails=o},function(){o.error="Failed to fetch details"})},t.logout=function(){console.log("logout called"),a.logout(function(){window.location="/"},function(){alert("Failed to logout!")})},t.checkForgotPassword=function(){console.log("It called wrongCount: "+n.wrongCount),n.wrongCount>=3?t.isHideForgot=!1:t.isHideForgot=!0},t.hideShowPassword=function(){"password"==t.inputType?t.inputType="text":t.inputType="password"},t.myDetail=n.myDetail,t.token=n.token,t.inputType="password",t.getStatistic=function(){a.getStatistic(function(o){t.stats=o},function(o){console.log(o)})},t.getStatistic()}angular.module("SDLMSys").controller("AuthCtrl",["$rootScope","$scope","$location","$localStorage","MainSvc",AuthCtrl]);
" use strict";function DocumentCtrl(e,o,t,a,c,n,l){function d(){e.file=void 0}function u(o,t){o.getMines(function(o){e.uploadedDocs=o.data,e.numberOfDocs=e.uploadedDocs.length;var t={};if(e.numberOfDocs>0){for(i=0;i<e.numberOfDocs;i++){var a=new Date(e.uploadedDocs[i].uploadedDate),c=a.valueOf(),n=Math.ceil(c/864e5);t[n]?t[n]=t[n]+1:t[n]=1}for(date in t)e.peakUploaded<t[date]&&(e.peakUploaded=t[date]);e.averageTimePerDay=(e.numberOfDocs/Object.keys(t).length).toFixed(2),console.log(t)}},function(){$rootScope.error="Failed to fetch documents information"})}function r(o){c.updateInfo(o,function(o){e.editingDoc=null,u(c),e.exitEditing()},function(o){e.editingDoc=null})}console.log("Constructing DocumentCtrl..."),e.uploadedDocs=[],e.title="",e.authors="",e["abstract"]="",e.publisher="",e.publishedDate="",e.privacy="",e.category="",e.demomode="",e.log="",e.isSucceedUpload=0,e.isEditing=!1,isLoading=!1,e.peakUploaded=0,e.averageTimePerDay=0,e.selectFile=function(o){e.file=o,console.log("play here")},e.uploadDocument=function(){e.uploadFile(e.file)},e.clearLog=function(){e.log="",e.isSucceedUpload=0},e.submit=function(){e.uploadDocument()},e.uploadFile=function(i){i?(e.clearLog(),console.log("come here 3 - 1!"),i.upload=o.upload({url:"http://localhost:3001/uploadDoc",data:{username:e.username,title:e.title,authors:e.authors,"abstract":e["abstract"],publisher:e.publisher,publishedDate:e.publishedDate,privacy:e.privacy,category:e.category,demomode:e.demomode,file:i}}).then(function(o){console.log("Running here!"),t(function(){var t="file: "+o.config.data.file.name+", Response: "+JSON.stringify(o.data);e.log=t,i.result=o.data,e.isSucceedUpload=e.isSucceedUpload+1}),e.isSucceedUpload=e.isSucceedUpload+1,console.log("Running here out! 1"),d()},function(o){o.status>0&&(e.log=o.status+": "+o.data)},function(o){var t=parseInt(100*o.loaded/o.total);i.progress=Math.min(t),e.log="progress: "+t+"% "+o.config.data.file.name,e.isSucceedUpload=e.isSucceedUpload+1})):(e.log="$scope.file is null",console.log(e.log),console.log(e))},e.editDocument=function(o){e.isEditing=!0,e.editingDoc=o,e.title=o.title,e.authors=o.authors,e["abstract"]=o["abstract"],e.publisher=o.publisher,e.publishedDate=o.publishedDate,e.privacy=o.privacy,e.category=o.category},e.saveEditedDoc=function(){e.editingDoc.title=e.title,e.editingDoc.authors=e.authors,e.editingDoc["abstract"]=e["abstract"],e.editingDoc.publisher=e.publisher,e.editingDoc.publishedDate=e.publishedDate,e.editingDoc.privacy=e.privacy,e.editingDoc.category=e.category,r(e.editingDoc)},e.exitEditing=function(){e.editingDoc=null,e.title="",e.authors="",e["abstract"]="",e.publisher="",e.publishedDate="",e.isEditing=!1,e.privacy="",e.category="",e.demomode=""},e.deleteDocument=function(o,t){c.removeDoc(t,function(e){console.log("delete document result: ",e)},function(e){console.log("Error when delete document: ",e)}),e.uploadedDocs.slice(o,1),u(c)},e.getServerDocumentPath=function(e){return c.getDocPath(e)},e.downloadDocument=function(e){console.log("come here 9!");var o=document.createElement("a");document.body.appendChild(o),o.style="display: none",o.href=c.getDocPath(e.uploadedPath),o.download=e.fileName,o.click(),document.body.removeChild(o)},e.$watch("isSucceedUpload",function(){e.isLoading=!0,u(c),e.isLoading=!1}),e.currentPage=0,e.pageSize=l.ITEMS_PER_PAGE,e.numberOfPages=function(){return Math.ceil(e.uploadedDocs/e.pageSize)}}angular.module("SDLMSys").controller("DocumentCtrl",["$scope","Upload","$timeout","$localStorage","DocumentSvc","SearchSvc","PAGINATION",DocumentCtrl]);
" use strict";function MasterCtrl(t,e,o){console.log("Constructing MasterCtrl...");var g=992;t.getWidth=function(){return window.innerWidth},t.$watch(t.getWidth,function(o,l){o>=g?angular.isDefined(e.get("toggle"))?t.toggle=!!e.get("toggle"):t.toggle=!0:t.toggle=!1}),t.toggleSidebar=function(){t.toggle=!t.toggle,e.put("toggle",t.toggle)},window.onresize=function(){t.$apply()},console.log(t),t.myDetail=o.myDetail,t.token=o.token}angular.module("SDLMSys").controller("MasterCtrl",["$scope","$cookieStore","$localStorage",MasterCtrl]);
" use strict";function SearchCtrl(o,e,r,t,s,a,n,c){function u(){o.errorLog="",o.resultLog="",o.totalDocs=0,o.resultDocs=[]}function g(e){u(),s.searchData(e,o.privacy,o.category,o.demomode,0,o.pageSize,function(e){if(console.log(e),200==e.status){if(e.data){o.resultDocs=[];var r=e.data.responses.length,t=0;for(i=0;i<r;i++)e.data.responses[i].error?(o.errorLog=o.errorLog+e.data.responses[i].error.index+" - "+e.data.responses[i].error.reason,o.resultLog="There is no document found"):(o.resultDocs=o.resultDocs.concat(e.data.responses[i].hits.hits),t+=e.data.responses[i].hits.total);o.totalDocs=t}}else console.log(e.statusText),o.errorLog=e.statusText},function(e){o.errorLog=e})}function l(e){o.isLoading=!0,s.searchData(query,o.privacy,o.category,o.demomode,(e-1)*o.pageSize,o.pageSize,function(e){if(console.log(e),200==e.status){if(e.data){o.resultDocs=[];var r=e.data.responses.length,t=0;for(i=0;i<r;i++)e.data.responses[i].error?(o.errorLog=o.errorLog+e.data.responses[i].error.index+" - "+e.data.responses[i].error.reason,o.resultLog="There is no document found"):(o.resultDocs=o.resultDocs.concat(e.data.responses[i].hits.hits),t+=e.data.responses[i].hits.total);o.totalDocs=t,o.isLoading=!1}}else console.log(e.statusText),o.errorLog=e.statusText},function(e){o.errorLog=e})}console.log("Constructing SearchCtrl..."),o.resultDocs=[],o.errorLog="",o.submit=function(){o.isLoading=!0,g(o.query),o.isLoading=!1},o.$watch("query",function(e){o.isLoading=!0,g(e),o.isLoading=!1}),o.$watch("demomode",function(e){o.isLoading=!0,g(o.query),o.isLoading=!1}),o.$watch("category",function(e){o.isLoading=!0,g(o.query),o.isLoading=!1}),o.$watch("privacy",function(e){o.isLoading=!0,g(o.query),o.isLoading=!1}),o.pageChanged=function(o){l(o)},o.pagination={current:1},o.pageSize=c.ITEMS_PER_PAGE,o.totalDocs=0,o.getServerDocumentPath=function(o){return a.getDocPath(o)}}angular.module("SDLMSys").controller("SearchCtrl",["$scope","$filter","$timeout","$localStorage","SearchSvc","DocumentSvc","Utils","PAGINATION",SearchCtrl]);
"use strict";angular.module("SDLMSys").constant("DEPLOYED_HOST",{URL:"http://localhost:3001"}).constant("SEARCH_HOST",{URL:"http://localhost:9200",MULTI_API:"_msearch",SINGLE_API:"_search"}).constant("PAGINATION",{ITEMS_PER_PAGE:10});
function rdLoading(){var d={restrict:"AE",template:'<div class="loading"><div class="double-bounce1"></div><div class="double-bounce2"></div></div>'};return d}angular.module("SDLMSys").directive("rdLoading",rdLoading);
function rdWidgetBody(){var d={requires:"^rdWidget",scope:{loading:"@?",classes:"@?"},transclude:!0,template:'<div class="widget-body" ng-class="classes"><rd-loading ng-show="loading"></rd-loading><div ng-hide="loading" class="widget-content" ng-transclude></div></div>',restrict:"E"};return d}angular.module("SDLMSys").directive("rdWidgetBody",rdWidgetBody);
function rdWidgetFooter(){var e={requires:"^rdWidget",transclude:!0,template:'<div class="widget-footer" ng-transclude></div>',restrict:"E"};return e}angular.module("SDLMSys").directive("rdWidgetFooter",rdWidgetFooter);
function rdWidgetTitle(){var i={requires:"^rdWidget",scope:{title:"@",icon:"@"},transclude:!0,template:'<div class="widget-header"><div class="row"><div class="pull-left"><i class="fa" ng-class="icon"></i> {{title}} </div><div class="pull-right col-xs-6 col-sm-4" ng-transclude></div></div></div>',restrict:"E"};return i}angular.module("SDLMSys").directive("rdWidgetHeader",rdWidgetTitle);
function rdWidget(){var d={transclude:!0,template:'<div class="widget" ng-transclude></div>',restrict:"EA"};return d}angular.module("SDLMSys").directive("rdWidget",rdWidget);
" use strict";angular.module("SDLMSys").filter("startFrom",function(){return function(r,t){return t=+t,r.slice(t)}});
"use strict";angular.module("SDLMSys").config(["$httpProvider",function(t){t.interceptors.push(["$q","$location","$localStorage","Utils","SEARCH_HOST",function(t,r,e,n,o){return{request:function(t){return t.headers=t.headers||{},e.token&&!t.url.match(o.MULTI_API)&&(t.headers.Authorization="Bearer "+e.token),t},responseError:function(e){return 401!==e.status&&403!==e.status||r.path("/"),t.reject(e)}}}])}]);
"use strict";function DocumentSvc(e,t,c){var o=c.URL;return{getMines:function(t,c){e.get(o+"/mydocs").success(t).error(c)},updateInfo:function(t,c,n){e.post(o+"/updatedocument",t).success(c).error(n)},removeDoc:function(t,c,n){e.post(o+"/deletedocument",t).success(c).error(n)},getDocPath:function(e){return o+"/"+e}}}angular.module("SDLMSys").factory("DocumentSvc",["$http","$localStorage","DEPLOYED_HOST",DocumentSvc]);
"use strict";function MainSvc(e,t,o){var s=o.URL;return{save:function(t,o,c){e.post(s+"/signup",t).success(o).error(c)},login:function(t,o,c){e.post(s+"/authen",t).success(o).error(c)},me:function(t,o){e.get(s+"/me").success(t).error(o)},getStatistic:function(t,o){e.get(s+"/stats").success(t).error(o)},logout:function(e){console.log("Logout has been called"),delete t.token,delete t.myDetail,e()}}}angular.module("SDLMSys").factory("MainSvc",["$http","$localStorage","DEPLOYED_HOST",MainSvc]);
"use strict";function SearchSvc(e,r,i){return{searchData:function(t,o,n,u,p,s,y,l){var c=i.URL+"/"+i.MULTI_API,_="",d=r.myDetail;void 0===t&&(t="*");var m="",a="",q="";void 0!==n&&"all"!==n&&""!==n&&(m='"filter": {"match": {"category": { "query":    "'+n+'","operator": "and"}}}, "must" : ',a='{ "query" : {"bool" : {',q="}}}"),"pubnpri"===o?(console.log("my Public and my Private"),"2"===u?(d&&(_='{ "index" : "doclib2", "type":"Document_public", "routing" : "'+d._id+'", "pretty": "true" }\r\n'+a+m+'{ "query" : {"simple_query_string" : {"query" : "'+t+'"}}'+q+', "from" : "'+p+'", "size" : "'+s+'"}\r\n',_=_+'{ "index" : "doclib2", "type":"Document_private", "routing" : "'+d._id+'", "pretty": "true" }\r\n'+a+m+'{ "query" : {"simple_query_string" : {"query" : "'+t+'"}}'+q+', "from" : "'+p+'", "size" : "'+s+'"}\r\n'),console.log("Custom routing with one index and 3 public/private/share types")):"3"===u?(d&&(_='{ "index" : "doclib3_'+d._id+'_public", "type":"Document", "pretty": "true" }\r\n'+a+m+'{ "query" : {"simple_query_string" : {"query" : "'+t+'"}}'+q+', "from" : "'+p+'", "size" : "'+s+'"}\r\n',_=_+'{ "index" : "doclib3_'+d._id+'_privacy", "type":"Document", "pretty": "true" }\r\n'+a+m+'{ "query" : {"simple_query_string" : {"query" : "'+t+'"}}'+q+', "from" : "'+p+'", "size" : "'+s+'"}\r\n'),console.log("Separate indexes for users")):"4"===u?(d&&(_='{ "index" : "doclib4_'+d._id+'", "type":"Document_public", "pretty": "true" }\r\n'+a+m+'{ "query" : {"simple_query_string" : {"query" : "'+t+'"}}'+q+', "from" : "'+p+'", "size" : "'+s+'"}\r\n',_=_+'{ "index" : "doclib4_'+d._id+'", "type": "Document_private", "pretty": "true" }\r\n'+a+m+'{ "query" : {"simple_query_string" : {"query" : "'+t+'"}}'+q+', "from" : "'+p+'", "size" : "'+s+'"}\r\n'),console.log("Separate types for private/public/share")):(d&&(_='{"index" : "doclib_public", "type":"Document", "routing" :  "'+d._id+'", "pretty": "true"}\r\n'+a+m+'{ "query" : {"simple_query_string" : {"query" : "'+t+'"}}'+q+', "from" : "'+p+'", "size" : "'+s+'"}\r\n',_=_+'{"index" : "doclib_private", "type":"Document", "routing" :  "'+d._id+'", "pretty": "true" }\r\n'+a+m+'{ "query" : {"simple_query_string" : {"query" : "'+t+'"}}'+q+', "from" : "'+p+'", "size" : "'+s+'"}\r\n'),console.log("Custom routing with 3 public/private/share indexes"))):"public"===o?(console.log("my Public only"),"2"===u?(d&&(_='{ "index" : "doclib2", "type":"Document_public", "routing" : "'+d._id+'", "pretty": "true" }\r\n'+a+m+'{ "query" : {"simple_query_string" : {"query" : "'+t+'"}}'+q+', "from" : "'+p+'", "size" : "'+s+'"}\r\n'),console.log("Custom routing with one index and 3 public/private/share types")):"3"===u?(d&&(_='{ "index" : "doclib3_'+d._id+'_public", "type":"Document", "pretty": "true" }\r\n'+a+m+'{ "query" : {"simple_query_string" : {"query" : "'+t+'"}}'+q+', "from" : "'+p+'", "size" : "'+s+'"}\r\n'),console.log("Separate indexes for users")):"4"===u?(d&&(_='{ "index" : "doclib4_'+d._id+'", "type":"Document_public", "pretty": "true" }\r\n'+a+m+'{ "query" : {"simple_query_string" : {"query" : "'+t+'"}}'+q+', "from" : "'+p+'", "size" : "'+s+'"}\r\n'),console.log("Separate types for private/public/share")):(d&&(_='{"index" : "doclib_public", "type":"Document", "routing" :  "'+d._id+'", "pretty": "true"}\r\n'+a+m+'{ "query" : {"simple_query_string" : {"query" : "'+t+'"}}'+q+', "from" : "'+p+'", "size" : "'+s+'"}\r\n'),console.log("Custom routing with 3 public/private/share indexes"))):"private"===o?(console.log("my Private only"),"2"===u?(d&&(_='{ "index" : "doclib2", "type":"Document_private", "routing" : "'+d._id+'", "pretty": "true" }\r\n'+a+m+'{ "query" : {"simple_query_string" : {"query" : "'+t+'"}}'+q+', "from" : "'+p+'", "size" : "'+s+'"}\r\n'),console.log("Custom routing with one index and 3 public/private/share types")):"3"===u?(d&&(_='{ "index" : "doclib3_'+d._id+'_private", "type":"Document", "pretty": "true" }\r\n'+a+m+'{ "query" : {"simple_query_string" : {"query" : "'+t+'"}}'+q+', "from" : "'+p+'", "size" : "'+s+'"}\r\n'),console.log("Separate indexes for users")):"4"===u?(d&&(_='{ "index" : "doclib4_'+d._id+'", "type":"Document_private", "pretty": "true" }\r\n'+a+m+'{ "query" : {"simple_query_string" : {"query" : "'+t+'"}}'+q+', "from" : "'+p+'", "size" : "'+s+'"}\r\n'),console.log("Separate types for private/public/share")):(d&&(_='{"index" : "doclib_private", "type":"Document", "routing" :  "'+d._id+'", "pretty": "true"}\r\n'+a+m+'{ "query" : {"simple_query_string" : {"query" : "'+t+'"}}'+q+', "from" : "'+p+'", "size" : "'+s+'"}\r\n'),console.log("Custom routing with 3 public/private/share indexes"))):(console.log("All Public and my Private"),"2"===u?(_='{ "index" : "doclib2", "type":"Document_public", "pretty": "true" }\r\n'+a+m+'{ "query" : {"simple_query_string" : {"query" : "'+t+'"}}'+q+', "from" : "'+p+'", "size" : "'+s+'"}\r\n',d&&(_=_+'{ "index" : "doclib2", "type":"Document_private", "routing" : "'+d._id+'", "pretty": "true" }\r\n'+a+m+'{ "query" : {"simple_query_string" : {"query" : "'+t+'"}}'+q+', "from" : "'+p+'", "size" : "'+s+'"}\r\n'),console.log("Custom routing with one index and 3 public/private/share types")):"3"===u?(_='{ "index" : "doclib3_*_public", "type":"Document", "pretty": "true" }\r\n'+a+m+'{ "query" : {"simple_query_string" : {"query" : "'+t+'"}}'+q+', "from" : "'+p+'", "size" : "'+s+'"}\r\n',d&&(_=_+'{ "index" : "doclib3_'+d._id+'_privacy", "type":"Document", "pretty": "true" }\r\n'+a+m+'{ "query" : {"simple_query_string" : {"query" : "'+t+'"}}'+q+', "from" : "'+p+'", "size" : "'+s+'"}\r\n'),console.log("Separate indexes for users")):"4"===u?(_='{ "index" : "doclib4_*", "type":"Document_public", "pretty": "true" }\r\n'+a+m+'{ "query" : {"simple_query_string" : {"query" : "'+t+'"}}'+q+', "from" : "'+p+'", "size" : "'+s+'"}\r\n',d&&(_=_+'{ "index" : "doclib4_'+d._id+'", "type": "Document_private", "pretty": "true" }\r\n'+a+m+'{ "query" : {"simple_query_string" : {"query" : "'+t+'"}}'+q+', "from" : "'+p+'", "size" : "'+s+'"}\r\n'),console.log("Separate types for private/public/share")):(_='{"index" : "doclib_public", "type":"Document", "pretty": "true"}\r\n'+a+m+'{ "query" : {"simple_query_string" : {"query" : "'+t+'"}}'+q+', "from" : "'+p+'", "size" : "'+s+'"}\r\n',d&&(_=_+'{"index" : "doclib_private", "type":"Document", "routing" :  "'+d._id+'", "pretty": "true" }\r\n'+a+m+'{ "query" : {"simple_query_string" : {"query" : "'+t+'"}}'+q+', "from" : "'+p+'", "size" : "'+s+'"}\r\n'),console.log("Custom routing with 3 public/private/share indexes")));var g={method:"POST",url:c,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:_};console.log("=============SEARCH CONFIG============="),console.log(_),console.log(g),console.log("=============SEARCH CONFIG============="),e(g).then(function(e){"function"==typeof y&&y(e)},function(e){"function"==typeof l&&l(e)})}}}angular.module("SDLMSys").factory("SearchSvc",["$http","$localStorage","SEARCH_HOST",SearchSvc]);
"use strict";function Utils(){function n(n){for(var n=btoa(unescape(encodeURIComponent(n))),t=n.split(""),o=[],r=0;r<t.length;r++)o.push(t[r].charCodeAt(0));return new Uint8Array(o)}function t(n){var t=String.fromCharCode.apply(null,n),o=decodeURIComponent(escape(atob(t)));return o}return{convertStringToBinary:function(t,o){var r=n(t);"function"==typeof o&&o(r)},convertBinaryToString:function(n,o){var r=t(n);"function"==typeof o&&o(r)}}}angular.module("SDLMSys").factory("Utils",[Utils]);